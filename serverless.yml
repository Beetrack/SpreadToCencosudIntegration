
service: SpreadToCencosudIntegration

custom:
  environmentVariables:
    api_key:
        master: 'SpreadCencoMas'
        staging: 'SpreadCencoSta'

provider:
  name: aws
  runtime: python3.8
  stage: ${git:branch}
  region: us-west-2
  apiKeys:
    - ${self:custom.environmentVariables.api_key.${self:provider.stage}}


functions:
  integrate:
    handler: handler.integrate
    events:
      - http:
          path: spread_cencosud_integration/integrate
          method: post
          private: true

plugins:
  - serverless-plugin-git-variables
  - serverless-python-requirements
